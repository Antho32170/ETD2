EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 16
Title "SESAME"
Date "2021-08-17"
Rev "0.8"
Comp "ALEEA"
Comment1 "Dessin : Guillaume Arthaud"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	7250 5450 7150 5450
Wire Wire Line
	6300 5300 6400 5300
Wire Wire Line
	6300 5450 6500 5450
Wire Wire Line
	4500 5300 4800 5300
Wire Wire Line
	4800 5900 4650 5900
Wire Wire Line
	4650 5900 4650 6550
Wire Wire Line
	4650 6550 4500 6550
Wire Wire Line
	3000 7150 2850 7150
Wire Wire Line
	2850 7150 2850 7550
Wire Wire Line
	7250 5550 7050 5550
Wire Wire Line
	7250 5750 6950 5750
Wire Wire Line
	5650 6500 5650 7550
Wire Wire Line
	2850 7550 5650 7550
$Comp
L power:GND #PWR0104
U 1 1 60FAC5D8
P 1300 3350
F 0 "#PWR0104" H 1300 3100 50  0001 C CNN
F 1 "GND" H 1300 3200 50  0000 C CNN
F 2 "" H 1300 3350 50  0001 C CNN
F 3 "" H 1300 3350 50  0001 C CNN
	1    1300 3350
	-1   0    0    -1  
$EndComp
Text Label 7550 4650 0    50   ~ 0
Over_UI_Protection
$Sheet
S 3000 6350 1500 1000
U 60F1B237
F0 "PID" 50
F1 "PID.sch" 50
F2 "Feedback" O R 4500 6550 50 
F3 "Measure_Selected" I L 3000 7150 50 
F4 "Ext_SetPoint" I L 3000 6550 50 
$EndSheet
$Sheet
S 9300 5350 1450 1000
U 60F2F8DD
F0 "PROGRAMMABLE BREAKER" 50
F1 "programmable_breaker.sch" 50
F2 "Current_Sens" I L 9300 6150 50 
F3 "Voltage_Sens" I L 9300 6050 50 
F4 "Over_UI_Protection" O R 10750 5900 50 
F5 "Rearm" I L 9300 5450 50 
F6 "Current_Thres" I L 9300 5700 50 
F7 "Voltage_Thres" I L 9300 5600 50 
$EndSheet
Wire Wire Line
	8600 6250 8700 6250
Wire Wire Line
	8700 6250 8700 6500
Wire Wire Line
	10750 5900 10950 5900
Text Label 2200 6150 2    50   ~ 0
Voltage_Sens_R
Text Label 2200 6250 2    50   ~ 0
Current_Sens_R
Text Label 2200 5900 2    50   ~ 0
Voltage_Sens_L
Text Label 2200 6000 2    50   ~ 0
Current_Sens_L
Wire Wire Line
	5650 6500 8700 6500
Wire Wire Line
	10950 4650 10950 5900
Text Label 2250 6550 2    50   ~ 0
Ext_Setpoint
Text Label 6650 6150 0    50   ~ 0
Dir
Text Label 2600 3550 0    50   ~ 0
Dir
Text Label 2600 3700 0    50   ~ 0
Mode
Wire Wire Line
	2600 3700 2950 3700
Wire Wire Line
	2600 3550 2950 3550
Text Label 2200 5400 2    50   ~ 0
Mode
Text Label 6650 6250 0    50   ~ 0
CC_CV_Mode
Text Label 8700 5450 0    50   ~ 0
Rearm
Text Label 8700 5600 0    50   ~ 0
Voltage_Thres
Text Label 8700 5700 0    50   ~ 0
Current_Thres
Wire Wire Line
	8700 5700 9300 5700
Wire Wire Line
	8700 5600 9300 5600
Wire Wire Line
	8700 5450 9300 5450
Wire Wire Line
	8600 6150 9300 6150
Wire Wire Line
	8600 6050 9300 6050
$Sheet
S 7250 5350 1350 1000
U 60F421D1
F0 "MEASURE SELECTOR" 50
F1 "Measure_Selector.sch" 50
F2 "Voltage_Sens_R" I L 7250 5450 50 
F3 "Voltage_Sens_L" I L 7250 5850 50 
F4 "Current_Sens_R" I L 7250 5550 50 
F5 "Current_Sens_L" I L 7250 5750 50 
F6 "Dir" I L 7250 6150 50 
F7 "Measure_Selected" O R 8600 6250 50 
F8 "CC_CV_Mode" I L 7250 6250 50 
F9 "Current_Sens_Selected" O R 8600 6150 50 
F10 "Voltage_Sens_Selected" O R 8600 6050 50 
$EndSheet
Wire Wire Line
	4700 4350 4700 4650
$Sheet
S 2950 3450 1500 1000
U 60F4EAD9
F0 "DRIVER COMMAND" 50
F1 "Drivers_Command.sch" 50
F2 "Driver_LS" O R 4450 3900 50 
F3 "Driver_LP" O R 4450 4000 50 
F4 "Driver_RS" O R 4450 4100 50 
F5 "Driver_RP" O R 4450 4200 50 
F6 "PWM" I L 2950 4350 50 
F7 "~PWM" I L 2950 4250 50 
F8 "Dir" I L 2950 3550 50 
F9 "Mode" I L 2950 3700 50 
$EndSheet
Text Label 2200 4900 2    50   ~ 0
INT_PWM
Text Label 2200 4800 2    50   ~ 0
~INT_PWM
Wire Wire Line
	6650 6150 7250 6150
Wire Wire Line
	6650 6250 7250 6250
Text Label 2200 5500 2    50   ~ 0
CC_CV_Mode
$Sheet
S 650  700  500  150 
U 6142ECA0
F0 "INFOS" 100
F1 "infos.sch" 100
$EndSheet
$Sheet
S 3000 5100 1500 1000
U 60F16FAE
F0 "RAMP GENERATOR" 50
F1 "gen_ramp.sch" 50
F2 "Ramp" O R 4500 5300 50 
$EndSheet
Text Notes 950  2900 0    50   ~ 0
Johnson / Cinch Connectivity Solutions 108-0740-102\nor Keystone 6095\n+ CXS70-14-C
$Comp
L power:GNDPWR #PWR?
U 1 1 6140956C
P 1000 3350
F 0 "#PWR?" H 1000 3150 50  0001 C CNN
F 1 "GNDPWR" H 1000 3200 50  0000 C CNN
F 2 "" H 1000 3300 50  0001 C CNN
F 3 "" H 1000 3300 50  0001 C CNN
	1    1000 3350
	1    0    0    -1  
$EndComp
Wire Wire Line
	1000 3200 1000 3300
Connection ~ 1000 3200
Wire Wire Line
	1300 3350 1300 3300
Wire Wire Line
	1300 3300 1000 3300
Connection ~ 1000 3300
Wire Wire Line
	1000 3300 1000 3350
Wire Wire Line
	1000 3200 950  3200
Wire Wire Line
	1000 3050 1000 3200
Wire Wire Line
	900  3050 1000 3050
$Comp
L Mechanical:MountingHole_Pad J?
U 1 1 6142C008
P 800 3050
F 0 "J?" V 1050 3100 50  0000 C CNN
F 1 "6095" V 950 3100 50  0000 C CNN
F 2 "" H 800 3050 50  0001 C CNN
F 3 "~" H 800 3050 50  0001 C CNN
	1    800  3050
	0    -1   -1   0   
$EndComp
$Comp
L Connector:Screw_Terminal_01x01 J?
U 1 1 6142C002
P 750 3200
F 0 "J?" H 200 3100 50  0000 C CNN
F 1 "CXS70-14-C" H 200 3200 50  0000 C CNN
F 2 "" H 750 3200 50  0001 C CNN
F 3 "~" H 750 3200 50  0001 C CNN
	1    750  3200
	-1   0    0    1   
$EndComp
$Comp
L Mechanical:MountingHole_Pad J?
U 1 1 6142711F
P 800 2350
F 0 "J?" V 550 2400 50  0000 C CNN
F 1 "6095" V 650 2400 50  0000 C CNN
F 2 "" H 800 2350 50  0001 C CNN
F 3 "~" H 800 2350 50  0001 C CNN
	1    800  2350
	0    -1   -1   0   
$EndComp
$Comp
L Connector:Screw_Terminal_01x01 J?
U 1 1 61427119
P 750 2200
F 0 "J?" H 600 1950 50  0000 C CNN
F 1 "CXS70-14-C" H 600 2050 50  0000 C CNN
F 2 "Sesame_footprint:CXS70-14-C" H 750 2200 50  0001 C CNN
F 3 "~" H 750 2200 50  0001 C CNN
	1    750  2200
	-1   0    0    1   
$EndComp
Wire Wire Line
	1000 2200 1200 2200
Connection ~ 1000 2200
Wire Wire Line
	1000 2350 1000 2200
Wire Wire Line
	900  2350 1000 2350
Wire Wire Line
	950  2200 1000 2200
Wire Wire Line
	4500 2500 4800 2500
Wire Wire Line
	4500 2400 4700 2400
Connection ~ 3050 2200
Wire Wire Line
	3050 2200 3200 2200
Wire Wire Line
	3050 1050 3050 2200
$Sheet
S 3200 1950 1300 1000
U 60F171CE
F0 "U/I SENSOR LEFT" 50
F1 "voltage_current_sens.sch" 50
F2 "VProt" B L 3200 2200 100
F3 "VD_Mos" B R 4500 2200 100
F4 "Current_Sens" O R 4500 2400 50 
F5 "Voltage_Sens" O R 4500 2500 50 
$EndSheet
Wire Wire Line
	2900 2200 3050 2200
Text Label 3500 1050 0    50   ~ 0
VProt_Left
$Sheet
S 1200 1950 1700 550 
U 61456C6A
F0 "LEFT PROTECTION" 50
F1 "PROTECT.sch" 50
F2 "IN_OUT_PWR" B L 1200 2200 100
F3 "VProt" B R 2900 2200 100
$EndSheet
$Comp
L Mechanical:MountingHole_Pad J?
U 1 1 61485222
P 10900 2350
F 0 "J?" V 10650 2400 50  0000 C CNN
F 1 "6095" V 10750 2400 50  0000 C CNN
F 2 "" H 10900 2350 50  0001 C CNN
F 3 "~" H 10900 2350 50  0001 C CNN
	1    10900 2350
	0    1    -1   0   
$EndComp
$Comp
L Connector:Screw_Terminal_01x01 J?
U 1 1 6148521C
P 10950 2200
F 0 "J?" H 10800 1950 50  0000 C CNN
F 1 "CXS70-14-C" H 10800 2050 50  0000 C CNN
F 2 "Sesame_footprint:CXS70-14-C" H 10950 2200 50  0001 C CNN
F 3 "~" H 10950 2200 50  0001 C CNN
	1    10950 2200
	1    0    0    1   
$EndComp
Wire Wire Line
	10700 2200 10500 2200
Connection ~ 10700 2200
Wire Wire Line
	10700 2350 10700 2200
Wire Wire Line
	10800 2350 10700 2350
Wire Wire Line
	10750 2200 10700 2200
Wire Wire Line
	7150 2500 7250 2500
Wire Wire Line
	7050 2400 7250 2400
Connection ~ 8700 2200
Wire Wire Line
	8700 2200 8550 2200
Wire Wire Line
	8700 2200 8700 1050
Wire Wire Line
	8850 2200 8700 2200
Wire Wire Line
	7150 2500 7150 5450
Text Label 7150 1050 0    50   ~ 0
VProt_Right
$Sheet
S 8850 1950 1650 500 
U 614794AE
F0 "RIGHT PROTECTION" 50
F1 "PROTECT.sch" 50
F2 "IN_OUT_PWR" B R 10500 2200 100
F3 "VProt" B L 8850 2200 100
$EndSheet
$Sheet
S 7250 1950 1300 1000
U 60F19D5B
F0 "U/I SENSOR RIGHT" 50
F1 "voltage_current_sens.sch" 50
F2 "VProt" B R 8550 2200 100
F3 "VD_Mos" B L 7250 2200 100
F4 "Current_Sens" O L 7250 2400 50 
F5 "Voltage_Sens" O L 7250 2500 50 
$EndSheet
Wire Wire Line
	6850 5850 7250 5850
Wire Wire Line
	4700 1600 4700 2400
Wire Wire Line
	4800 1700 4800 2500
Wire Wire Line
	4700 1600 6950 1600
Wire Wire Line
	6550 1050 8700 1050
Wire Wire Line
	4500 2200 5050 2200
Wire Wire Line
	5050 1050 3050 1050
Wire Wire Line
	6550 2600 6700 2600
Wire Wire Line
	5050 3650 4950 3650
Wire Wire Line
	4950 2700 4950 3650
Wire Wire Line
	4950 2700 5050 2700
Wire Wire Line
	4900 2600 4900 3750
Wire Wire Line
	5050 2600 4900 2600
Wire Wire Line
	5050 3550 5000 3550
Wire Wire Line
	4450 3900 5050 3900
Wire Wire Line
	5050 4350 4700 4350
Wire Wire Line
	6650 2700 6550 2700
Wire Wire Line
	5000 2800 5000 3550
Wire Wire Line
	5050 2800 5000 2800
Wire Wire Line
	4900 3750 5050 3750
Wire Wire Line
	6550 2800 6600 2800
$Sheet
S 5050 1950 1500 950 
U 60F18239
F0 "DC/DC CONVERTER" 50
F1 "DC_DC_Converter.sch" 50
F2 "VD_LS" B L 5050 2200 100
F3 "VD_RS" B R 6550 2200 100
F4 "VG_LS" I L 5050 2600 50 
F5 "VG_LP" I L 5050 2800 50 
F6 "VG_RS" I R 6550 2600 50 
F7 "VG_RP" I R 6550 2800 50 
F8 "VS_L" U L 5050 2700 50 
F9 "VS_R" U R 6550 2700 50 
$EndSheet
Wire Wire Line
	4450 4200 5050 4200
Wire Wire Line
	5050 4100 4450 4100
Wire Wire Line
	4450 4000 5050 4000
$Comp
L power:GNDPWR #PWR?
U 1 1 6156FACF
P 10700 3350
F 0 "#PWR?" H 10700 3150 50  0001 C CNN
F 1 "GNDPWR" H 10700 3200 50  0000 C CNN
F 2 "" H 10700 3300 50  0001 C CNN
F 3 "" H 10700 3300 50  0001 C CNN
	1    10700 3350
	-1   0    0    -1  
$EndComp
Connection ~ 10700 3200
Wire Wire Line
	10700 3200 10750 3200
Wire Wire Line
	10700 3050 10700 3200
Wire Wire Line
	10800 3050 10700 3050
$Comp
L Mechanical:MountingHole_Pad J?
U 1 1 6156FADE
P 10900 3050
F 0 "J?" V 11150 3100 50  0000 C CNN
F 1 "6095" V 11050 3100 50  0000 C CNN
F 2 "" H 10900 3050 50  0001 C CNN
F 3 "~" H 10900 3050 50  0001 C CNN
	1    10900 3050
	0    1    -1   0   
$EndComp
$Comp
L Connector:Screw_Terminal_01x01 J?
U 1 1 6156FAE4
P 10950 3200
F 0 "J?" H 10400 3100 50  0000 C CNN
F 1 "CXS70-14-C" H 10400 3200 50  0000 C CNN
F 2 "" H 10950 3200 50  0001 C CNN
F 3 "~" H 10950 3200 50  0001 C CNN
	1    10950 3200
	1    0    0    1   
$EndComp
Wire Wire Line
	10700 3200 10700 3350
Text Label 6850 3350 1    50   ~ 0
Voltage_Sens_L
$Sheet
S 5050 3450 1500 1000
U 60F19D6C
F0 "MOS DRIVERS" 50
F1 "Mos_Drivers.sch" 50
F2 "Driver_LS" I L 5050 3900 50 
F3 "VG_LP" O L 5050 3550 50 
F4 "Driver_LP" I L 5050 4000 50 
F5 "VG_LS" O L 5050 3750 50 
F6 "VG_RS" O R 6550 3750 50 
F7 "VG_RP" O R 6550 3550 50 
F8 "Driver_RP" I L 5050 4200 50 
F9 "Driver_RS" I L 5050 4100 50 
F10 "Enable" I L 5050 4350 50 
F11 "VS_L" U L 5050 3650 50 
F12 "VS_R" U R 6550 3650 50 
$EndSheet
Wire Wire Line
	6600 2800 6600 3550
Wire Wire Line
	6550 3550 6600 3550
Wire Wire Line
	6700 2600 6700 3750
Wire Wire Line
	6550 3750 6700 3750
Wire Wire Line
	6550 3650 6650 3650
Wire Wire Line
	6650 3650 6650 2700
Text Notes 5350 4400 0    100  ~ 20
Trouver Driver
Wire Wire Line
	6850 1700 6850 5850
Text Label 7150 3350 1    50   ~ 0
Voltage_Sens_R
Wire Wire Line
	4700 4650 10950 4650
Wire Wire Line
	7050 2400 7050 5550
Text Label 6950 3350 1    50   ~ 0
Current_Sens_L
Text Label 7050 3350 1    50   ~ 0
Current_Sens_R
$Sheet
S 4800 5100 1500 1000
U 60F1AF26
F0 "PWM GEN" 50
F1 "PWM_Gen.sch" 50
F2 "Ramp" I L 4800 5300 50 
F3 "PWM" O R 6300 5300 50 
F4 "~PWM" O R 6300 5450 50 
F5 "Feedback" I L 4800 5900 50 
$EndSheet
Wire Wire Line
	6950 1600 6950 5750
Wire Wire Line
	6550 2200 7250 2200
Wire Wire Line
	4800 1700 6850 1700
Text Label 2200 6850 2    50   ~ 0
Rearm
Text Label 2200 7000 2    50   ~ 0
Voltage_Thres
Text Label 2200 7100 2    50   ~ 0
Current_Thres
Text Label 2200 5300 2    50   ~ 0
Dir
Wire Wire Line
	1600 6850 2200 6850
Wire Wire Line
	1600 7000 2200 7000
Wire Wire Line
	1600 7100 2200 7100
Wire Wire Line
	1600 6550 3000 6550
Wire Wire Line
	2200 5500 1600 5500
Wire Wire Line
	1600 4250 2950 4250
Wire Wire Line
	1600 4350 2950 4350
Wire Wire Line
	1600 5400 2200 5400
Wire Wire Line
	2200 5300 1600 5300
Wire Wire Line
	2200 6000 1600 6000
Wire Wire Line
	2200 6250 1600 6250
Wire Wire Line
	1600 5900 2200 5900
Wire Wire Line
	1600 6150 2200 6150
Wire Wire Line
	6400 4900 6400 5300
Wire Wire Line
	6500 4800 6500 5450
$Sheet
S 600  4100 1000 3150
U 618748E2
F0 "INT EXT CONFIG" 50
F1 "Int_Ext_Config.sch" 50
F2 "Voltage_Sens_R" I R 1600 6150 50 
F3 "Voltage_Sens_L" I R 1600 5900 50 
F4 "Current_Sens_R" I R 1600 6250 50 
F5 "Current_Sens_L" I R 1600 6000 50 
F6 "Dir" O R 1600 5300 50 
F7 "Mode" O R 1600 5400 50 
F8 "INT_PWM" I R 1600 4900 50 
F9 "~INT_PWM" I R 1600 4800 50 
F10 "PWM" O R 1600 4350 50 
F11 "~PWM" O R 1600 4250 50 
F12 "CC_CV_Mode" O R 1600 5500 50 
F13 "Ext_Setpoint" O R 1600 6550 50 
F14 "Ext_Current_Tresh" O R 1600 7100 50 
F15 "Ext_Voltage_Tresh" O R 1600 7000 50 
F16 "Ext_Rearm" O R 1600 6850 50 
$EndSheet
Wire Wire Line
	6400 4900 1600 4900
Wire Wire Line
	6500 4800 1600 4800
Text Label 2200 4250 2    50   ~ 0
~PWM
Text Label 2200 4350 2    50   ~ 0
PWM
Text Notes 5200 250  0    100  ~ 20
Calculs SEPIC
$Sheet
S 5050 700  1500 700 
U 60F1AA92
F0 "INTERNAL SUPPLIES" 50
F1 "alims.sch" 50
F2 "Left_Supply" I L 5050 1050 50 
F3 "Right_Supply" I R 6550 1050 50 
$EndSheet
$EndSCHEMATC
