Version 4
SHEET 1 2464 1072
WIRE 1312 -160 1296 -160
WIRE 1408 -160 1392 -160
WIRE 1120 -48 960 -48
WIRE 1200 -48 1120 -48
WIRE 1296 -48 1296 -160
WIRE 1296 -48 1280 -48
WIRE 1312 -48 1296 -48
WIRE 1408 -32 1408 -160
WIRE 1408 -32 1376 -32
WIRE 1616 -32 1408 -32
WIRE 1136 -16 1008 -16
WIRE 1200 -16 1136 -16
WIRE 1296 -16 1280 -16
WIRE 1312 -16 1296 -16
WIRE 1296 0 1296 -16
WIRE 1840 64 1824 64
WIRE 1952 64 1920 64
WIRE 1984 64 1952 64
WIRE 2080 64 2064 64
WIRE 1824 80 1824 64
WIRE 0 160 -144 160
WIRE 208 160 80 160
WIRE 224 160 208 160
WIRE 320 160 304 160
WIRE 608 160 320 160
WIRE 1296 160 1296 80
WIRE -144 192 -144 160
WIRE 608 192 608 160
WIRE 1616 208 1616 -32
WIRE 1824 208 1616 208
WIRE 1920 208 1904 208
WIRE 1952 272 1952 64
WIRE 1968 272 1952 272
WIRE 1312 288 1296 288
WIRE 1408 288 1392 288
WIRE 2080 288 2080 64
WIRE 2080 288 2032 288
WIRE 2144 288 2080 288
WIRE 1824 304 1616 304
WIRE 1920 304 1920 208
WIRE 1920 304 1904 304
WIRE 1968 304 1920 304
WIRE 320 400 320 160
WIRE 400 400 320 400
WIRE 640 400 544 400
WIRE 1008 400 1008 -16
WIRE 1008 400 640 400
WIRE 1136 400 1008 400
WIRE 1200 400 1136 400
WIRE 1296 400 1296 288
WIRE 1296 400 1280 400
WIRE 1312 400 1296 400
WIRE 1408 416 1408 288
WIRE 1408 416 1376 416
WIRE 1616 416 1616 304
WIRE 1616 416 1408 416
WIRE 208 432 208 160
WIRE 400 432 208 432
WIRE 560 432 544 432
WIRE 624 432 560 432
WIRE 784 432 624 432
WIRE 960 432 960 -48
WIRE 960 432 784 432
WIRE 1136 432 960 432
WIRE 1200 432 1136 432
WIRE 1296 432 1280 432
WIRE 1312 432 1296 432
WIRE 1296 448 1296 432
WIRE 400 464 384 464
WIRE 560 464 560 432
WIRE 560 464 544 464
WIRE 384 480 384 464
WIRE 1296 608 1296 528
WIRE 416 848 416 832
WIRE 608 848 416 848
WIRE 416 864 416 848
WIRE 784 864 784 432
WIRE 784 864 672 864
WIRE 608 880 576 880
WIRE 576 912 576 880
WIRE 576 1008 576 992
FLAG -32 736 VCC
FLAG -32 816 0
FLAG 400 368 VCC
FLAG 384 480 0
FLAG 608 272 0
FLAG -144 272 0
FLAG 1344 448 0
FLAG 1344 384 VCC
FLAG 640 832 VCC
FLAG 640 896 0
FLAG 416 944 0
FLAG 416 752 VCC
FLAG 2144 288 CURRENT_SENS
IOPIN 2144 288 Out
FLAG 576 1008 0
FLAG 1296 608 0
FLAG 1344 0 0
FLAG 1344 -64 VCC
FLAG 1296 160 0
FLAG 2000 320 0
FLAG 2000 256 VCC
FLAG 1824 80 0
FLAG 624 432 VDir
FLAG 1120 -48 VDir
FLAG 1136 432 VDir
FLAG 640 400 VMeasure
FLAG 1136 -16 VMeasure
FLAG 1136 400 VMeasure
SYMBOL AutoGenerated/INA240A2 464 416 R0
SYMATTR InstName U1
SYMBOL res 320 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 0.01
SYMBOL voltage -32 720 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -144 176 R0
WINDOW 3 -166 -55 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 0 0 0 0.5s 1s)
SYMBOL voltage 608 176 R0
WINDOW 3 -170 -53 Left 2
SYMATTR Value PULSE(0 10 0.5s 0 0 0.5s 1s)
SYMATTR InstName V3
SYMBOL OpAmps/LT1366 1344 352 R0
SYMATTR InstName U2
SYMBOL res 1408 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1184 416 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 84 53 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1296 416 R90
WINDOW 0 57 54 VBottom 2
WINDOW 3 56 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 1312 544 R180
WINDOW 0 -46 37 Left 2
WINDOW 3 -48 11 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL OpAmps/LT1366 640 800 R0
SYMATTR InstName U3
SYMBOL res 432 736 M0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 432 848 M0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL voltage 576 896 R0
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 0 0 0 0.5s 1s)
SYMBOL res 96 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 5
SYMBOL OpAmps/LT1366 1344 -96 R0
SYMATTR InstName U4
SYMBOL res 1408 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 1184 -32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 84 53 VBottom 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1296 -32 R90
WINDOW 0 57 54 VBottom 2
WINDOW 3 56 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 1312 96 R180
WINDOW 0 -46 37 Left 2
WINDOW 3 -48 11 Left 2
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL OpAmps/LT1366 2000 224 R0
SYMATTR InstName U5
SYMBOL res 1920 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 1920 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 2080 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1936 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
TEXT -56 928 Left 2 !.lib ina240a2.lib
TEXT -56 888 Left 2 !.tran 900m
TEXT 376 544 Left 2 ;INA240A2: 50 V/V
TEXT 376 584 Left 2 ;@10V = 50A -> 5V -> 0.1V\n@10V = 5A -> 0.5V -> 0.01V
TEXT 1144 736 Left 2 ;si dir = 5v alors signal = 5-out\nsi dir = 0v alors signal = out
TEXT 1728 448 Left 2 ;(VMeasure - VDir) + (VDir - VMeasure)
TEXT 1392 160 Left 2 ;VMeasure - VDir
TEXT 1392 608 Left 2 ;VDir - VMeasure
RECTANGLE Normal 1724 -20 2124 472 2
RECTANGLE Normal 1580 188 1028 -224 2
RECTANGLE Normal 1580 636 1028 224 2
